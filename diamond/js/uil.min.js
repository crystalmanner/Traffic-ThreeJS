// lo-th.github.io/uil/license
!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?i(exports):"function"==typeof define&&define.amd?define(["exports"],i):i(t.UIL=t.UIL||{})}(this,function(t){"use strict";function i(t,i){this.x=t||0,this.y=i||0}function s(t){if(t=t||{},this.css=w.css,this.colors=w.colors,this.svgs=w.svgs,this.zone={x:0,y:0,w:0,h:0},this.local=(new i).neg(),this.isCanvasOnly=!1,this.main=t.main||null,this.isUI=t.isUI||!1,this.parentGroup=null,this.p=void 0!==t.p?t.p:w.size.p,this.w=this.isUI?this.main.size.w:w.size.w,void 0!==t.w&&(this.w=t.w),this.h=this.isUI?this.main.size.h:w.size.h,void 0!==t.h&&(this.h=t.h),this.h=this.h<11?11:this.h,this.autoWidth=t.auto||!0,this.isOpen=!1,this.radius=t.radius||0,this.isNumber=!1,this.mono=!1,this.isEdit=!1,this.simple=t.simple||!1,this.simple&&(this.sa=0),this.setSize(this.w),void 0!==t.sa&&(this.sa=t.sa),void 0!==t.sb&&(this.sb=t.sb),this.simple&&(this.sb=this.w-this.sa),this.sc=void 0===t.sc?47:t.sc,this.objectLink=null,this.isSend=!1,this.val=null,this.bg=this.isUI?this.main.bg:w.colors.background,this.bgOver=w.colors.backgroundOver,void 0!==t.bg&&(this.bg=t.bg,this.bgOver=t.bg),void 0!==t.bgOver&&(this.bgOver=t.bgOver),this.titleColor=t.titleColor||w.colors.text,this.fontColor=t.fontColor||w.colors.text,void 0!==t.color&&(isNaN(t.color)?this.fontColor=t.color:this.fontColor=w.hexToHtml(t.color),this.titleColor=this.fontColor),this.colorPlus=w.ColorLuma(this.fontColor,.3),this.txt=t.name||"Proto",this.rename=t.rename||"",this.target=t.target||null,this.callback=void 0===t.callback?null:t.callback,this.endCallback=null,null===this.callback&&this.isUI&&null!==this.main.callback&&(this.callback=this.main.callback),this.c=[],this.s=[],this.c[0]=w.dom("div",w.css.basic+"position:relative; height:20px; float:left; overflow:hidden;"),this.s[0]=this.c[0].style,this.isUI&&(this.s[0].marginBottom="1px"),this.simple||(this.c[1]=w.dom("div",w.css.txt),this.s[1]=this.c[1].style,this.c[1].textContent=""===this.rename?this.txt:this.rename,this.s[1].color=this.titleColor),t.pos){this.s[0].position="absolute";for(var s in t.pos)this.s[0][s]=t.pos[s];this.mono=!0}t.css&&(this.s[0].cssText=t.css)}function e(t){s.call(this,t),this.value=t.value||!1,this.buttonColor=t.bColor||this.colors.button,this.inh=t.inh||this.h;var i=Math.floor(.5*this.h)-.5*(this.inh-2);this.c[2]=this.dom("div",this.css.basic+"background:"+this.colors.boolbg+"; height:"+(this.inh-2)+"px; width:36px; top:"+i+"px; border-radius:10px; border:2px solid "+this.boolbg),this.c[3]=this.dom("div",this.css.basic+"height:"+(this.inh-6)+"px; width:16px; top:"+(i+2)+"px; border-radius:10px; background:"+this.buttonColor+";"),this.init(),this.update()}function h(t){s.call(this,t),this.value=!1,this.values=t.value||[this.txt],this.isDown=!1,this.buttonColor=t.bColor||this.colors.button,this.isLoadButton=t.loader||!1,this.isDragButton=t.drag||!1,this.isDragButton&&(this.isLoadButton=!0),this.lng=this.values.length,this.tmp=[],this.stat=[];for(var i=0;i<this.lng;i++)this.c[i+2]=this.dom("div",this.css.txt+"text-align:center; top:1px; background:"+this.buttonColor+"; height:"+(this.h-2)+"px; border-radius:"+this.radius+"px; line-height:"+(this.h-4)+"px;"),this.c[i+2].style.color=this.fontColor,this.c[i+2].innerHTML=this.values[i],this.stat[i]=1;void 0!==this.c[1]&&(this.c[1].textContent=""),this.isLoadButton&&this.initLoader(),this.isDragButton&&(this.lng++,this.initDrager()),this.init()}function o(t){s.call(this,t),this.autoWidth=!1,this.buttonColor=this.colors.button,this.setTypeNumber(t),this.radius=.5*this.w,this.twoPi=2*Math.PI,this.pi90=.5*Math.PI,this.offset=new i,this.h=t.h||this.w+10,this.top=0,this.c[0].style.width=this.w+"px",void 0!==this.c[1]&&(this.c[1].style.width=this.w+"px",this.c[1].style.textAlign="center",this.top=10,this.h+=10),this.percent=0,this.cmode=0,this.c[2]=this.dom("div",this.css.txt+"text-align:center; top:"+(this.h-20)+"px; width:"+this.w+"px; color:"+this.fontColor),this.c[3]=this.getCircular(),this.setSvg(this.c[3],"d",this.makePath(),1),this.setSvg(this.c[3],"stroke",this.fontColor,1),this.setSvg(this.c[3],"viewBox","0 0 "+this.w+" "+this.w),this.setCss(this.c[3],{width:this.w,height:this.w,left:0,top:this.top}),this.init(),this.update()}function n(t){s.call(this,t),this.ctype=t.ctype||"array",this.wfixe=this.sb>256?256:this.sb,this.side=t.side||"down",this.up="down"===this.side?0:1,this.baseH=this.h,this.offset=new i,this.decal=new i,this.pi90=.5*Math.PI,this.c[2]=this.dom("div",this.css.txt+"height:"+(this.h-4)+"px;border-radius:"+this.radius+"px; line-height:"+(this.h-8)+"px;"),this.s[2]=this.c[2].style,this.up&&(this.s[2].top="auto",this.s[2].bottom="2px"),this.c[3]=this.getColorRing(),this.c[3].style.visibility="hidden",this.hsl=null,this.value="#ffffff",void 0!==t.value&&(t.value instanceof Array?this.value=w.rgbToHex(t.value):isNaN(t.value)?this.value=t.value:this.value=w.hexToHtml(t.value)),this.bcolor=null,this.isDown=!1,this.setColor(this.value),this.init(),void 0!==t.open&&this.open()}function r(t){s.call(this,t),this.round=Math.round,this.autoHeight=!0,this.baseH=this.h,this.hplus=50,this.res=t.res||40,this.l=1,this.pa1=[],this.pa2=[],this.pa3=[];for(var i=this.res+1;i--;)this.pa1.push(50),this.pa2.push(50),this.pa3.push(50);var e=Math.floor(.5*this.h)-6;this.c[1].textContent="FPS",this.c[0].style.cursor="pointer",this.c[0].style.pointerEvents="auto";var h="display:none; left:10px; top:"+this.h+"px; height:"+(this.hplus-8)+"px; background: rgba(0, 0, 0, 0.2);border:1px solid rgba(255, 255, 255, 0.2); ";this.c[2]=this.dom("path",this.css.basic+h,{fill:"rgba(200,200,200,0.3)","stroke-width":1,stroke:this.fontColor,"vector-effect":"non-scaling-stroke"}),this.c[2].setAttribute("viewBox","0 0 "+this.res+" 42"),this.c[2].setAttribute("height","100%"),this.c[2].setAttribute("width","100%"),this.c[2].setAttribute("preserveAspectRatio","none"),this.dom("path",null,{fill:"rgba(255,255,0,0.3)","stroke-width":1,stroke:"#FF0","vector-effect":"non-scaling-stroke"},this.c[2]),this.dom("path",null,{fill:"rgba(0,255,255,0.3)","stroke-width":1,stroke:"#0FF","vector-effect":"non-scaling-stroke"},this.c[2]),this.c[3]=this.dom("div",this.css.basic+"width:100%; bottom:0px; height:1px; background: rgba(255, 255, 255, 0.2);"),this.c[4]=this.dom("path",this.css.basic+"position:absolute; width:10px; height:10px; left:4px; top:"+e+"px;",{d:"M 3 8 L 8 5 3 2 3 8 Z",fill:this.fontColor,stroke:"none"}),this.isShow=t.show||!1,this.c[1].style.marginLeft="10px",this.now=self.performance&&self.performance.now?self.performance.now.bind(performance):Date.now,this.startTime=this.now(),this.prevTime=this.startTime,this.frames=0,this.isMem=!1,this.ms=0,this.fps=0,this.mem=0,this.mm=0,self.performance&&self.performance.memory&&(this.isMem=!0),this.init()}function l(t){s.call(this,t),this.value=void 0!==t.value?t.value:[0,0,0],this.lng=this.value.length,this.precision=t.precision||2,this.multiplicator=t.multiplicator||1,this.autoWidth=!0,this.isNumber=!1,this.isDown=!1,this.h=t.h||138,this.rh=this.h-10,this.top=0,this.c[0].style.width=this.w+"px",void 0!==this.c[1]&&(this.c[1].style.width=this.w+"px",this.top=10,this.h+=10),this.gh=this.rh-28,this.gw=this.w-28,this.c[2]=this.dom("div",this.css.txt+"text-align:center; top:"+(this.h-20)+"px; width:"+this.w+"px; color:"+this.fontColor),this.c[2].textContent=this.value;var i=this.dom("svg",this.css.basic,{viewBox:"0 0 "+this.w+" "+this.rh,width:this.w,height:this.rh,preserveAspectRatio:"none"});this.setCss(i,{width:this.w,height:this.rh,left:0,top:this.top}),this.dom("path","",{d:"",stroke:this.colors.text,"stroke-width":2,fill:"none","stroke-linecap":"butt"},i),this.dom("rect","",{x:10,y:10,width:this.gw+8,height:this.gh+8,stroke:"rgba(0,0,0,0.3)","stroke-width":1,fill:"none"},i),this.iw=(this.gw-4*(this.lng-1))/this.lng;var e=[];this.cMode=[],this.v=[];for(var h=0;h<this.lng;h++)e[h]=[14+h*this.iw+4*h,this.iw],e[h][2]=e[h][0]+e[h][1],this.cMode[h]=0,this.v[h]=this.value[h]/this.multiplicator,this.dom("rect","",{x:e[h][0],y:14,width:e[h][1],height:1,fill:this.fontColor,"fill-opacity":.3},i);this.tmp=e,this.c[3]=i,this.init(),void 0!==this.c[1]&&(this.c[1].style.top="0px",this.c[1].style.height="20px",this.s[1].lineHeight="15px"),this.update(!1)}function a(t){s.call(this,t),this.uis=[],this.autoHeight=!0,this.current=-1,this.target=null,this.decal=0,this.baseH=this.h;var i=Math.floor(.5*this.h)-6;this.isLine=void 0!==t.line&&t.line,this.c[2]=this.dom("div",this.css.basic+"width:100%; left:0; height:auto; overflow:hidden; top:"+this.h+"px"),this.c[3]=this.dom("path",this.css.basic+"position:absolute; width:10px; height:10px; left:0; top:"+i+"px;",{d:this.svgs.group,fill:this.fontColor,stroke:"none"}),this.c[4]=this.dom("path",this.css.basic+"position:absolute; width:10px; height:10px; left:4px; top:"+i+"px;",{d:this.svgs.arrow,fill:this.fontColor,stroke:"none"}),this.isLine&&(this.c[5]=this.dom("div",this.css.basic+"background:rgba(255, 255, 255, 0.2); width:100%; left:0; height:1px; bottom:0px"));var e=this.s;e[0].height=this.h+"px",e[1].height=this.h+"px",this.c[1].name="group",this.s[1].marginLeft="10px",this.s[1].lineHeight=this.h-4,this.s[1].color=this.fontColor,this.s[1].fontWeight="bold",this.init(),void 0!==t.bg&&this.setBG(t.bg),void 0!==t.open&&this.open()}function c(t){s.call(this,t),this.autoWidth=!1,this.value=[0,0],this.joyType="analogique",this.model=void 0!==t.mode?t.mode:0,this.precision=t.precision||2,this.multiplicator=t.multiplicator||1,this.pos=new i,this.tmp=new i,this.interval=null,this.radius=.5*this.w,this.distance=.25*this.radius,this.h=t.h||this.w+10,this.top=0,this.c[0].style.width=this.w+"px",void 0!==this.c[1]&&(this.c[1].style.width=this.w+"px",this.c[1].style.textAlign="center",this.top=10,this.h+=10),this.c[2]=this.dom("div",this.css.txt+"text-align:center; top:"+(this.h-20)+"px; width:"+this.w+"px; color:"+this.fontColor),this.c[2].textContent=this.value,this.c[3]=this.getJoystick(this.model),this.setSvg(this.c[3],"viewBox","0 0 "+this.w+" "+this.w),this.setCss(this.c[3],{width:this.w,height:this.w,left:0,top:this.top}),this.ratio=128/this.w,this.init(),this.update(!1)}function u(t){s.call(this,t),this.autoWidth=!1,this.buttonColor=this.colors.button,this.setTypeNumber(t),this.mPI=.8*Math.PI,this.toDeg=180/Math.PI,this.cirRange=2*this.mPI,this.offset=new i,this.radius=.5*this.w,this.h=t.h||this.w+10,this.top=0,this.c[0].style.width=this.w+"px",void 0!==this.c[1]&&(this.c[1].style.width=this.w+"px",this.c[1].style.textAlign="center",this.top=10,this.h+=10),this.percent=0,this.cmode=0,this.c[2]=this.dom("div",this.css.txt+"text-align:center; top:"+(this.h-20)+"px; width:"+this.w+"px; color:"+this.fontColor),this.c[3]=this.getKnob(),this.setSvg(this.c[3],"stroke",this.fontColor,1),this.setSvg(this.c[3],"stroke",this.fontColor,3),this.setSvg(this.c[3],"d",this.makeGrad(),3),this.setSvg(this.c[3],"viewBox","0 0 "+this.ww+" "+this.ww),this.setCss(this.c[3],{width:this.w,height:this.w,left:0,top:this.top}),this.r=0,this.init(),this.update()}function d(t){s.call(this,t),this.autoHeight=!1;var i=t.align||"center";this.sMode=0,this.tMode=0,this.buttonColor=t.bColor||this.colors.button;var e=Math.floor(.5*this.h)-5;this.c[2]=this.dom("div",this.css.basic+"top:0; display:none;"),this.c[3]=this.dom("div",this.css.txt+"text-align:"+i+"; line-height:"+(this.h-4)+"px; top:1px;  background:"+this.buttonColor+"; height:"+(this.h-2)+"px; border-radius:"+this.radius+"px;"),this.c[4]=this.dom("path",this.css.basic+"position:absolute; width:10px; height:10px; top:"+e+"px;",{d:this.svgs.arrow,fill:this.fontColor,stroke:"none"}),this.scroller=this.dom("div",this.css.basic+"right:5px;  width:10px; background:#666; display:none;"),this.c[3].style.color=this.fontColor,this.list=t.list||[],this.items=[],this.prevName="",this.baseH=this.h,this.itemHeight=t.itemHeight||this.h-3,this.full=t.full||!1,this.py=0,this.ww=this.sb,this.scroll=!1,this.isDown=!1,this.current=null,this.side=t.side||"down",this.up="down"===this.side?0:1,this.up?(this.c[2].style.top="auto",this.c[3].style.top="auto",this.c[4].style.top="auto",this.c[2].style.bottom=this.h-2+"px",this.c[3].style.bottom="1px",this.c[4].style.bottom=e+"px"):this.c[2].style.top=this.baseH+"px",this.listIn=this.dom("div",this.css.basic+"left:0; top:0; width:100%; background:rgba(0,0,0,0.2);"),this.listIn.name="list",this.topList=0,this.c[2].appendChild(this.listIn),this.c[2].appendChild(this.scroller),this.setList(this.list,t.value),this.init(),void 0!==t.open&&this.open()}function p(t){s.call(this,t),this.setTypeNumber(t),this.isDown=!1,this.value=[0],this.toRad=1,this.isNumber=!0,this.isAngle=!1,this.isVector=!1,void 0!==t.value&&(isNaN(t.value)?t.value instanceof Array?(this.value=t.value,this.isNumber=!1):t.value instanceof Object&&(this.value=[],t.value.x&&(this.value[0]=t.value.x),t.value.y&&(this.value[1]=t.value.y),t.value.z&&(this.value[2]=t.value.z),t.value.w&&(this.value[3]=t.value.w),this.isVector=!0):this.value=[t.value]),this.lng=this.value.length,this.tmp=[],t.isAngle&&(this.isAngle=!0,this.toRad=Math.PI/180),this.current=-1,this.prev={x:0,y:0,d:0,v:0},this.cMode=[];for(var i=this.lng;i--;)this.isAngle&&(this.value[i]=(180*this.value[i]/Math.PI).toFixed(this.precision)),this.c[2+i]=this.dom("div",this.css.txtselect+"letter-spacing:-1px; height:"+(this.h-4)+"px; line-height:"+(this.h-8)+"px;"),t.center&&(this.c[2+i].style.textAlign="center"),this.c[2+i].textContent=this.value[i],this.c[2+i].style.color=this.fontColor,this.c[2+i].isNum=!0,this.cMode[i]=0;this.init()}function f(t){if(s.call(this,t),this.setTypeNumber(t),this.model=t.stype||0,void 0!==t.mode&&(this.model=t.mode),this.buttonColor=t.bColor||this.colors.button,this.isDown=!1,this.isOver=!1,this.allway=t.allway||!1,this.firstImput=!1,this.c[2]=this.dom("div",this.css.txtselect+"letter-spacing:-1px; text-align:right; width:47px; border:1px dashed "+this.colors.hide+"; color:"+this.fontColor),this.c[3]=this.dom("div",this.css.basic+" top:0; height:"+this.h+"px;"),this.c[4]=this.dom("div",this.css.basic+"background:"+this.colors.scrollback+"; top:2px; height:"+(this.h-4)+"px;"),this.c[5]=this.dom("div",this.css.basic+"left:4px; top:5px; height:"+(this.h-10)+"px; background:"+this.fontColor+";"),this.c[2].isNum=!0,0!==this.model){if(1===this.model||3===this.model)var i=4,e=8,h=this.h-4,o=20;2===this.model&&(i=2,e=4,o=2,h=.5*(this.h-4)),3===this.model&&(this.c[5].style.visible="none"),this.c[4].style.borderRadius=i+"px",this.c[4].style.height=e+"px",this.c[4].style.top=.5*this.h-i+"px",this.c[5].style.borderRadius=.5*i+"px",this.c[5].style.height=i+"px",this.c[5].style.top=.5*this.h-.5*i+"px",this.c[6]=this.dom("div",this.css.basic+"border-radius:"+o+"px; margin-left:"+.5*-h+"px; border:1px solid "+this.colors.border+"; background:"+this.buttonColor+"; left:4px; top:2px; height:"+(this.h-4)+"px; width:"+h+"px;")}this.init()}function v(t){s.call(this,t),this.cmode=0,this.value=t.value||"",this.allway=t.allway||!1,this.firstImput=!1,this.c[2]=this.dom("div",this.css.txtselect),this.c[2].textContent=this.value,this.init()}function m(t){s.call(this,t);var i=t.prefix||"";this.c[2]=this.dom("div",this.css.txt+"text-align:right; width:60px; line-height:"+(this.h-8)+"px; color:"+this.fontColor),31===this.h&&(this.s[0].height=this.h+"px",this.s[1].top="8px",this.c[2].style.top="8px"),this.c[1].textContent=this.txt.substring(0,1).toUpperCase()+this.txt.substring(1).replace("-"," "),this.c[2].textContent=i,this.init()}function g(){var t,i,s=arguments,g=!1,x=null;switch("string"==typeof s[0]?(t=s[0],i=s[1]||{}):"object"==typeof s[0]&&(g=!0,void 0===s[2]&&[].push.call(s,{}),t=s[2].type?s[2].type:"slide",i=s[2],i.name=s[1],i.value=s[0][s[1]]),t.toLowerCase()){case"bool":x=new e(i);break;case"button":x=new h(i);break;case"circular":x=new o(i);break;case"color":x=new n(i);break;case"fps":x=new r(i);break;case"graph":x=new l(i);break;case"group":x=new a(i);break;case"joystick":x=new c(i);break;case"knob":x=new u(i);break;case"list":x=new d(i);break;case"numeric":case"number":x=new p(i);break;case"slide":x=new f(i);break;case"textInput":case"string":x=new v(i);break;case"title":x=new m(i)}if(null!==x)return g&&x.setReferency(s[0],s[1]),x}function x(t){this.canvas=null,t=t||{},void 0!==t.transparent&&(w.colors.background="none",w.colors.backgroundOver="none"),this.isReset=!0,this.tmpAdd=null,this.tmpH=0,this.isCanvas=t.isCanvas||!1,this.isCanvasOnly=!1,this.css=void 0!==t.css?t.css:"",this.callback=void 0===t.callback?null:t.callback,this.forceHeight=t.maxHeight||0,this.cn="",this.size=w.size,void 0!==t.p&&(this.size.p=t.p),void 0!==t.w&&(this.size.w=t.w),void 0!==t.h&&(this.size.h=t.h),void 0!==t.s&&(this.size.s=t.s),this.size.h=this.size.h<11?11:this.size.h,this.local=(new i).neg(),this.zone={x:0,y:0,w:this.size.w,h:0},this.mouse=(new i).neg(),this.h=0,this.prevY=-1,this.sw=0,this.colors=w.colors,this.bg=t.bg||w.colors.background,this.isWithClose=void 0===t.close||t.close,this.bh=this.isWithClose?this.size.h:0,this.autoResize=void 0===t.autoResize||t.autoResize,this.isCenter=t.center||!1,this.isOpen=!0,this.isDown=!1,this.isScroll=!1,this.uis=[],this.current=-1,this.target=null,this.decal=0,this.ratio=1,this.oy=0,this.content=w.dom("div",w.css.basic+" width:0px; height:auto; top:0px; "+this.css),this.innerContent=w.dom("div",w.css.basic+"width:100%; top:0; left:0; height:auto; overflow:hidden;"),this.content.appendChild(this.innerContent),this.inner=w.dom("div",w.css.basic+"width:100%; left:0; "),this.innerContent.appendChild(this.inner),this.scrollBG=w.dom("div",w.css.basic+"right:0; top:0; width:"+(this.size.s-1)+"px; height:10px; display:none; background:"+this.bg+";"),this.content.appendChild(this.scrollBG),this.scroll=w.dom("div",w.css.basic+"background:"+this.colors.scroll+"; right:2px; top:0; width:"+(this.size.s-4)+"px; height:10px;"),this.scrollBG.appendChild(this.scroll),this.bottom=w.dom("div",w.css.txt+"width:100%; top:auto; bottom:0; left:0; border-bottom-right-radius:10px;  border-bottom-left-radius:10px; text-align:center; height:"+this.bh+"px; line-height:"+(this.bh-5)+"px; border-top:1px solid "+w.colors.stroke+";"),this.content.appendChild(this.bottom),this.bottom.textContent="close",this.bottom.style.background=this.bg,this.parent=void 0!==t.parent?t.parent:null,null!==this.parent||this.isCanvas||(this.parent=document.body,this.isCenter||(this.content.style.right="10px")),null!==this.parent&&this.parent.appendChild(this.content),this.isCanvas&&null===this.parent&&(this.isCanvasOnly=!0),this.isCanvasOnly||(this.content.style.pointerEvents="auto"),this.setWidth(),this.isCanvas&&this.makeCanvas(),k.add(this)}void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Math.sign&&(Math.sign=function(t){return t<0?-1:t>0?1:+t}),void 0===Function.prototype.name&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&function(){Object.assign=function(t){if(void 0===t||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(t),s=1;s<arguments.length;s++){var e=arguments[s];if(void 0!==e&&null!==e)for(var h in e)Object.prototype.hasOwnProperty.call(e,h)&&(i[h]=e[h])}return i}}();var b={frag:document.createDocumentFragment(),colorRing:null,joystick_0:null,joystick_1:null,circular:null,knob:null,svgns:"http://www.w3.org/2000/svg",htmls:"http://www.w3.org/1999/xhtml",DOM_SIZE:["height","width","top","left","bottom","right","margin-left","margin-right","margin-top","margin-bottom"],SVG_TYPE_D:["pattern","defs","transform","stop","animate","radialGradient","linearGradient","animateMotion"],SVG_TYPE_G:["svg","rect","circle","path","polygon","text","g","line","foreignObject"],TwoPI:6.283185307179586,size:{w:240,h:20,p:30,s:20},colors:{text:"#C0C0C0",textOver:"#FFFFFF",background:"rgba(44,44,44,0.3)",backgroundOver:"rgba(11,11,11,0.5)",input:"#005AAA",border:"#454545",borderOver:"#5050AA",borderSelect:"#308AFF",scrollback:"rgba(44,44,44,0.2)",scrollbackover:"rgba(44,44,44,0.5)",button:"#404040",boolbg:"#181818",select:"#308AFF",moving:"#03afff",down:"#024699",stroke:"rgba(11,11,11,0.5)",scroll:"#333333",hide:"rgba(0,0,0,0)"},css:{basic:"position:absolute; pointer-events:none; box-sizing:border-box; margin:0; padding:0; overflow:hidden; -o-user-select:none; -ms-user-select:none; -khtml-user-select:none; -webkit-user-select:none; -moz-user-select:none;"},svgs:{group:"M 7 7 L 7 8 8 8 8 7 7 7 M 5 7 L 5 8 6 8 6 7 5 7 M 3 7 L 3 8 4 8 4 7 3 7 M 7 5 L 7 6 8 6 8 5 7 5 M 6 6 L 6 5 5 5 5 6 6 6 M 7 3 L 7 4 8 4 8 3 7 3 M 6 4 L 6 3 5 3 5 4 6 4 M 3 5 L 3 6 4 6 4 5 3 5 M 3 3 L 3 4 4 4 4 3 3 3 Z",arrow:"M 3 8 L 8 5 3 2 3 8 Z",arrowDown:"M 5 8 L 8 3 2 3 5 8 Z",arrowUp:"M 5 2 L 2 7 8 7 5 2 Z"},setText:function(t,i,s){t=t||11,i=i||"#CCC",s=s||"Monospace",b.colors.text=i,b.css.txt=b.css.basic+"font-family:"+s+"; font-size:"+t+"px; color:"+i+"; padding:2px 10px; left:0; top:2px; height:16px; width:100px; overflow:hidden; white-space: nowrap;",b.css.txtselect=b.css.txt+"padding:2px 5px; border:1px dashed "+b.colors.border+";",b.css.item=b.css.txt+"position:relative; background:rgba(0,0,0,0.2); margin-bottom:1px;"},clone:function(t){return t.cloneNode(!0)},setSvg:function(t,i,s,e){-1===e?t.setAttributeNS(null,i,s):t.childNodes[e||0].setAttributeNS(null,i,s)},setCss:function(t,i){for(var s in i)-1!==b.DOM_SIZE.indexOf(s)?t.style[s]=i[s]+"px":t.style[s]=i[s]},set:function(t,i){for(var s in i)"txt"===s&&(t.textContent=i[s]),t.setAttributeNS(null,s,i[s])},get:function(t,i){if(void 0===i)return t;if(!isNaN(i))return t.childNodes[i];if(i instanceof Array){if(2===i.length)return t.childNodes[i[0]].childNodes[i[1]];if(3===i.length)return t.childNodes[i[0]].childNodes[i[1]].childNodes[i[2]]}},dom:function(t,i,s,e,h){return t=t||"div",-1!==b.SVG_TYPE_D.indexOf(t)||-1!==b.SVG_TYPE_G.indexOf(t)?"svg"===t?(e=document.createElementNS(b.svgns,"svg"),b.set(e,s)):(void 0===e&&(e=document.createElementNS(b.svgns,"svg")),b.addAttributes(e,t,s,h)):e=void 0===e?document.createElementNS(b.htmls,t):e.appendChild(document.createElementNS(b.htmls,t)),i&&(e.style.cssText=i),void 0===h?e:e.childNodes[h||0]},addAttributes:function(t,i,s,e){var h=document.createElementNS(b.svgns,i);return b.set(h,s),b.get(t,e).appendChild(h),-1!==b.SVG_TYPE_G.indexOf(i)&&(h.style.pointerEvents="none"),h},clear:function(t){for(b.purge(t);t.firstChild;)t.firstChild.firstChild&&b.clear(t.firstChild),t.removeChild(t.firstChild)},purge:function(t){var i,s,e=t.attributes;if(e)for(i=e.length;i--;)s=e[i].name,"function"==typeof t[s]&&(t[s]=null);if(e=t.childNodes)for(i=e.length;i--;)b.purge(t.childNodes[i])},clamp:function(t,i,s){return t<i?i:t>s?s:t},ColorLuma:function(t,i){t=String(t).replace(/[^0-9a-f]/gi,""),t.length<6&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),i=i||0;var s,e,h="#";for(e=0;e<3;e++)s=parseInt(t.substr(2*e,2),16),s=Math.round(Math.min(Math.max(0,s+s*i),255)).toString(16),h+=("00"+s).substr(s.length);return h},findDeepInver:function(t){return.3*t[0]+.59*t[1]+.11*t[2]<=.6},hexToHtml:function(t){return t=void 0===t?0:t,"#"+("000000"+t.toString(16)).substr(-6)},htmlToHex:function(t){return t.toUpperCase().replace("#","0x")},u255:function(t,i){return parseInt(t.substring(i,i+2),16)/255},u16:function(t,i){return parseInt(t.substring(i,i+1),16)/15},unpack:function(t){return 7==t.length?[b.u255(t,1),b.u255(t,3),b.u255(t,5)]:4==t.length?[b.u16(t,1),b.u16(t,2),b.u16(t,3)]:void 0},htmlRgb:function(t){return"rgb("+Math.round(255*t[0])+","+Math.round(255*t[1])+","+Math.round(255*t[2])+")"},rgbToHex:function(t){return"#"+("000000"+(255*t[0]<<16^255*t[1]<<8^255*t[2]<<0).toString(16)).slice(-6)},hueToRgb:function(t,i,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?t+6*(i-t)*s:s<.5?i:s<2/3?t+6*(i-t)*(2/3-s):t},rgbToHsl:function(t){var i=t[0],s=t[1],e=t[2],h=Math.min(i,s,e),o=Math.max(i,s,e),n=o-h,r=0,l=0,a=(h+o)/2;return a>0&&a<1&&(l=n/(a<.5?2*a:2-2*a)),n>0&&(o==i&&o!=s&&(r+=(s-e)/n),o==s&&o!=e&&(r+=2+(e-i)/n),o==e&&o!=i&&(r+=4+(i-s)/n),r/=6),[r,l,a]},hslToRgb:function(t){var i,s,e=t[0],h=t[1],o=t[2];return 0===h?[o,o,o]:(s=o<=.5?o*(h+1):o+h-o*h,i=2*o-s,[b.hueToRgb(i,s,e+.33333),b.hueToRgb(i,s,e),b.hueToRgb(i,s,e-.33333)])},makeGradiant:function(t,i,s,e){b.dom(t,null,i,s,0);for(var h,o=s.childNodes[0].childNodes.length-1,n=0;n<e.length;n++)h=e[n],b.dom("stop",null,{offset:h[0]+"%",style:"stop-color:"+h[1]+"; stop-opacity:"+h[2]+";"},s,[0,o])},makeKnob:function(t){var i=128,s=b.dom("svg",b.css.basic,{viewBox:"0 0 128 "+i,width:i,height:i,preserveAspectRatio:"none"});b.dom("circle","",{cx:64,cy:64,r:34,fill:b.colors.button,stroke:"rgba(0,0,0,0.3)","stroke-width":8},s),b.dom("path","",{d:"",stroke:b.colors.text,"stroke-width":4,fill:"none","stroke-linecap":"round"},s),b.dom("circle","",{cx:64,cy:64,r:41,stroke:"rgba(0,0,0,0.1)","stroke-width":7,fill:"none"},s),b.dom("path","",{d:"",stroke:"rgba(255,255,255,0.3)","stroke-width":2,fill:"none","stroke-linecap":"round","stroke-opacity":.5},s),b.knob=s},makeCircular:function(t){var i=128,s=b.dom("svg",b.css.basic,{viewBox:"0 0 128 "+i,width:i,height:i,preserveAspectRatio:"none"});b.dom("circle","",{cx:64,cy:64,r:40,stroke:"rgba(0,0,0,0.1)","stroke-width":10,fill:"none"},s),b.dom("path","",{d:"",stroke:b.colors.text,"stroke-width":7,fill:"none","stroke-linecap":"butt"},s),b.circular=s},makeJoystick:function(t){var i=128,s=Math.floor(49),e=Math.floor(.6*s),h=b.dom("svg",b.css.basic,{viewBox:"0 0 128 "+i,width:i,height:i,preserveAspectRatio:"none"});if(b.dom("defs",null,{},h),b.dom("g",null,{},h),0===t){var o=[[40,"rgb(0,0,0)",.3],[80,"rgb(0,0,0)",0],[90,"rgb(50,50,50)",.4],[100,"rgb(50,50,50)",0]];b.makeGradiant("radialGradient",{id:"grad",cx:"50%",cy:"50%",r:"50%",fx:"50%",fy:"50%"},h,o),o=[[60,"rgb(0,0,0)",.5],[100,"rgb(0,0,0)",0]],b.makeGradiant("radialGradient",{id:"gradS",cx:"50%",cy:"50%",r:"50%",fx:"50%",fy:"50%"},h,o);var n=["rgb(40,40,40)","rgb(48,48,48)","rgb(30,30,30)"],r=["rgb(1,90,197)","rgb(3,95,207)","rgb(0,65,167)"];o=[[30,n[0],1],[60,n[1],1],[80,n[1],1],[100,n[2],1]],b.makeGradiant("radialGradient",{id:"gradIn",cx:"50%",cy:"50%",r:"50%",fx:"50%",fy:"50%"},h,o),o=[[30,r[0],1],[60,r[1],1],[80,r[1],1],[100,r[2],1]],b.makeGradiant("radialGradient",{id:"gradIn2",cx:"50%",cy:"50%",r:"50%",fx:"50%",fy:"50%"},h,o),b.dom("circle","",{cx:64,cy:64,r:s,fill:"url(#grad)"},h),b.dom("circle","",{cx:69,cy:74,r:e+10,fill:"url(#gradS)"},h),b.dom("circle","",{cx:64,cy:64,r:e,fill:"url(#gradIn)"},h),b.joystick_0=h}else o=[[69,"rgb(0,0,0)",0],[70,"rgb(0,0,0)",.3],[100,"rgb(0,0,0)",0]],b.makeGradiant("radialGradient",{id:"gradX",cx:"50%",cy:"50%",r:"50%",fx:"50%",fy:"50%"},h,o),b.dom("circle","",{cx:64,cy:64,r:s,fill:"none",stroke:"rgba(100,100,100,0.25)","stroke-width":"4"},h),b.dom("circle","",{cx:64,cy:64,r:e+14,fill:"url(#gradX)"},h),b.dom("circle","",{cx:64,cy:64,r:e,fill:"none",stroke:"rgb(100,100,100)","stroke-width":"4"},h),b.joystick_1=h},makeColorRing:function(){var t=256,i=b.dom("svg",b.css.basic,{viewBox:"0 0 256 "+t,width:t,height:t,preserveAspectRatio:"none"});b.dom("defs",null,{},i),b.dom("g",null,{},i);var s,e,h,o,n,r,l,a,c,u=8/108/24*Math.PI,d=0,p=[];for(r=0;r<=24;++r){if(h=r/24,o=h*b.TwoPI,s=.5*(d+o),e=1/Math.cos(.5*(o-d)),n=[Math.sin(d),-Math.cos(d),Math.sin(s)*e,-Math.cos(s)*e,Math.sin(o),-Math.cos(o)],p[1]=b.rgbToHex(b.hslToRgb([h,1,.5])),r>0){for(l=6;l--;)n[l]=(108*n[l]+128).toFixed(2);a=" M"+n[0]+" "+n[1]+" Q"+n[2]+" "+n[3]+" "+n[4]+" "+n[5],c=[[0,p[0],1],[100,p[1],1]],b.makeGradiant("linearGradient",{id:"G"+r,x1:n[0],y1:n[1],x2:n[4],y2:n[5],gradientUnits:"userSpaceOnUse"},i,c),b.dom("path","",{d:a,"stroke-width":40,stroke:"url(#G"+r+")","stroke-linecap":"butt"},i,1)}d=o-u,p[0]=p[1],h}c=[[0,"#FFFFFF",1],[50,"#FFFFFF",0],[50,"#000000",0],[100,"#000000",1]],b.makeGradiant("linearGradient",{id:"GL1",x1:68,y1:68,x2:68,y2:188,gradientUnits:"userSpaceOnUse"},i,c),c=[[0,"#7f7f7f",0],[50,"#7f7f7f",.5],[100,"#7f7f7f",1]],b.makeGradiant("linearGradient",{id:"GL2",x1:68,y1:68,x2:188,y2:68,gradientUnits:"userSpaceOnUse"},i,c),b.dom("circle","",{cx:128,cy:128,r:90,fill:"red"},i),b.dom("circle","",{cx:128,cy:128,r:90,fill:"url(#GL2)"},i),b.dom("circle","",{cx:128,cy:128,r:90,fill:"url(#GL1)"},i),b.dom("circle","",{cx:0,cy:0,r:6,"stroke-width":3,stroke:"#FFF",fill:"none"},i),b.dom("circle","",{cx:0,cy:0,r:6,"stroke-width":3,stroke:"#000",fill:"none"},i),b.colorRing=i},icon:function(t,i,s){s=s||40,i=i||"#DEDEDE";var e=["<svg xmlns='"+b.svgns+"' version='1.1' xmlns:xlink='"+b.htmls+"' style='pointer-events:none;' preserveAspectRatio='xMinYMax meet' x='0px' y='0px' width='"+s+"px' height='"+s+"px' viewBox='0 0 256 256'><g>"];switch(t){case"logo":e[1]="<path id='logoin' stroke='"+i+"' stroke-width='16' stroke-linejoin='round' stroke-linecap='square' fill='none' d='M 192 44 L 192 148 Q 192 174.5 173.3 193.25 154.55 212 128 212 101.5 212 82.75 193.25 64 174.5 64 148 L 64 44 M 160 44 L 160 148 Q 160 161.25 150.65 170.65 141.25 180 128 180 114.75 180 105.35 170.65 96 161.25 96 148 L 96 44'/>";break;case"save":e[1]="<path stroke='"+i+"' stroke-width='4' stroke-linejoin='round' stroke-linecap='round' fill='none' d='M 26.125 17 L 20 22.95 14.05 17 M 20 9.95 L 20 22.95'/><path stroke='"+i+"' stroke-width='2.5' stroke-linejoin='round' stroke-linecap='round' fill='none' d='M 32.6 23 L 32.6 25.5 Q 32.6 28.5 29.6 28.5 L 10.6 28.5 Q 7.6 28.5 7.6 25.5 L 7.6 23'/>"}return e[2]="</g></svg>",e.join("\n")}};b.setText();var w=b,y={ui:[],ID:null,lock:!1,wlock:!1,current:-1,needReZone:!0,isEventsInit:!1,prevDefault:["contextmenu","mousedown","mousemove","mouseup"],xmlserializer:new XMLSerializer,tmpTime:null,tmpImage:null,oldCursor:"auto",input:null,firstImput:!0,callbackImput:null,isLoop:!1,listens:[],e:{type:null,clientX:0,clientY:0,keyCode:NaN,key:null,delta:0},isMobile:!1,add:function(t){y.ui.push(t),y.getZone(t),y.isEventsInit||y.initEvents()},testMobile:function(){var t=navigator.userAgent;return!!(t.match(/Android/i)||t.match(/webOS/i)||t.match(/iPhone/i)||t.match(/iPad/i)||t.match(/iPod/i)||t.match(/BlackBerry/i)||t.match(/Windows Phone/i))},remove:function(t){var i=y.ui.indexOf(t);-1!==i&&(y.removeListen(t),y.ui.splice(i,1)),0===y.ui.length&&y.removeEvents()},initEvents:function(){if(!y.isEventsInit){var t=document.body;y.isMobile=y.testMobile(),y.isMobile?(t.addEventListener("touchstart",y,!1),t.addEventListener("touchend",y,!1),t.addEventListener("touchmove",y,!1)):(t.addEventListener("mousedown",y,!1),t.addEventListener("contextmenu",y,!1),t.addEventListener("wheel",y,!1),document.addEventListener("mousemove",y,!1),document.addEventListener("mouseup",y,!1)),window.addEventListener("keydown",y,!1),window.addEventListener("resize",y.resize,!1),y.isEventsInit=!0}},removeEvents:function(){if(y.isEventsInit){var t=document.body;y.isMobile?(t.removeEventListener("touchstart",y,!1),t.removeEventListener("touchend",y,!1),t.removeEventListener("touchmove",y,!1)):(t.removeEventListener("mousedown",y,!1),t.removeEventListener("contextmenu",y,!1),t.removeEventListener("wheel",y,!1),document.removeEventListener("mousemove",y,!1),document.removeEventListener("mouseup",y,!1)),window.removeEventListener("keydown",y),window.removeEventListener("resize",y.resize),y.isEventsInit=!1}},resize:function(){y.needReZone=!0;for(var t,i=y.ui.length;i--;)t=y.ui[i],t.isGui&&!t.isCanvasOnly&&t.autoResize&&t.setHeight()},handleEvent:function(t){if(-1!==t.type.indexOf(y.prevDefault)&&t.preventDefault(),"contextmenu"!==t.type){y.findZone();var i=y.e;"keydown"===t.type&&y.editText(t),"wheel"===t.type?i.delta=t.deltaY>0?1:-1:i.delta=0,i.clientX=t.clientX||0,i.clientY=t.clientY||0,i.type=t.type,y.isMobile&&(t.touches&&t.touches.length>0&&(i.clientX=t.touches[0].clientX||0,i.clientY=t.touches[0].clientY||0),"touchstart"===t.type&&(i.type="mousedown"),"touchend"===t.type&&(i.type="mouseup"),"touchmove"===t.type&&(i.type="mousemove")),"mousedown"===i.type&&(y.lock=!0),"mouseup"===i.type&&(y.lock=!1),y.isMobile&&"mousedown"===i.type&&y.findID(i),"mousemove"!==i.type||y.lock||y.findID(i),
null!==y.ID&&(y.ID.isCanvasOnly&&(i.clientX=y.ID.mouse.x,i.clientY=y.ID.mouse.y),y.ID.handleEvent(i)),y.isMobile&&"mouseup"===i.type&&y.clearOldID()}},findID:function(t){for(var i,s,e,h=y.ui.length,o=-1;h--;)if(i=y.ui[h],i.isCanvasOnly?(s=i.mouse.x,e=i.mouse.y):(s=t.clientX,e=t.clientY),y.onZone(i,s,e)){o=h,o!==y.current&&(y.clearOldID(),y.current=o,y.ID=i);break}-1===o&&y.clearOldID()},clearOldID:function(){y.ID&&(y.current=-1,y.ID.reset(),y.ID=null,y.cursor())},calcUis:function(t,i,s){var e,h,o=t.length,n=0,r=0;for(h=0;h<o;h++)e=t[h],e.zone.w=e.w,e.zone.h=e.h,e.autoWidth?(e.zone.x=i.x,e.zone.y=s,s+=e.h+1):(0===n&&(s+=e.h+1),e.zone.x=i.x+n,e.zone.y=0===n?s-e.h:r,r=e.zone.y,(n+=e.w)+e.w>i.w&&(n=0)),e.isGroup&&e.calcUis()},findTarget:function(t,i){for(var s=t.length;s--;)if(y.onZone(t[s],i.clientX,i.clientY))return s;return-1},findZone:function(t){if(y.needReZone||t){for(var i,s=y.ui.length;s--;)i=y.ui[s],y.getZone(i),i.isGui&&i.calcUis();y.needReZone=!1}},onZone:function(t,i,s){if(void 0===i||void 0===s)return!1;var e=t.zone,h=i-e.x,o=s-e.y,n=h>=0&&o>=0&&h<=e.w&&o<=e.h;return n?t.local.set(h,o):t.local.neg(),n},getZone:function(t){if(!t.isCanvasOnly){var i=t.getDom().getBoundingClientRect();t.zone={x:i.left,y:i.top,w:i.width,h:i.height}}},cursor:function(t){(t=t||"auto")!==y.oldCursor&&(document.body.style.cursor=t,y.oldCursor=t)},toCanvas:function(t,i,s,e){if(e&&null!==y.tmpTime&&(clearTimeout(y.tmpTime),y.tmpTime=null),null===y.tmpTime){y.lock&&(y.tmpTime=setTimeout(function(){y.tmpTime=null},10));var h=!1;i===t.canvas.width&&s===t.canvas.height||(h=!0),null===y.tmpImage&&(y.tmpImage=new Image);var o=y.tmpImage,n=y.xmlserializer.serializeToString(t.content),r='<svg xmlns="http://www.w3.org/2000/svg" width="'+i+'" height="'+s+'"><foreignObject style="pointer-events: none; left:0;" width="100%" height="100%">'+n+"</foreignObject></svg>";o.onload=function(){var e=t.canvas.getContext("2d");h?(t.canvas.width=i,t.canvas.height=s):e.clearRect(0,0,i,s),e.drawImage(this,0,0),t.onDraw()},o.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(r),o.crossOrigin=""}},clearInput:function(){null!==y.input&&(y.firstImput||y.callbackImput(),y.input.style.background="none",y.callbackImput=null,y.input=null,y.firstImput=!0)},setInput:function(t,i,s){y.clearInput(),y.callbackImput=i,y.input=t,y.input.style.background=s},select:function(){document.execCommand("selectall",null,!1)},editText:function(t){null!==y.input&&(13===t.keyCode?(y.callbackImput(),y.clearInput()):y.input.isNum?(t.keyCode>95&&t.keyCode<106||110===t.keyCode||109===t.keyCode)&&(y.firstImput?(y.input.textContent=t.key,y.firstImput=!1):y.input.textContent+=t.key):y.firstImput?(y.input.textContent=t.key,y.firstImput=!1):y.input.textContent+=t.key)},loop:function(){y.isLoop&&requestAnimationFrame(y.loop),y.update()},update:function(){for(var t=y.listens.length;t--;)y.listens[t].listening()},removeListen:function(t){var i=y.listens.indexOf(t);-1!==i&&y.listens.splice(i,1),0===y.listens.length&&(y.isLoop=!1)},addListen:function(t){-1===y.listens.indexOf(t)&&(y.listens.push(t),y.isLoop||(y.isLoop=!0,y.loop()))}},k=y;Object.assign(i.prototype,{set:function(t,i){return this.x=t,this.y=i,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divideScalar:function(t){return this.multiplyScalar(1/t)},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},angle:function(){var t=Math.atan2(this.y,this.x);return t<0&&(t+=2*Math.PI),t},addScalar:function(t){return this.x+=t,this.y+=t,this},negate:function(){return this.x*=-1,this.y*=-1,this},neg:function(){return this.x=-1,this.y=-1,this},isZero:function(){return 0===this.x&&0===this.y},copy:function(t){return this.x=t.x,this.y=t.y,this},equals:function(t){return t.x===this.x&&t.y===this.y},nearEquals:function(t,i){return t.x.toFixed(i)===this.x.toFixed(i)&&t.y.toFixed(i)===this.y.toFixed(i)},lerp:function(t,i){return null===t?(this.x-=this.x*i,this.y-=this.y*i):(this.x+=(t.x-this.x)*i,this.y+=(t.y-this.y)*i),this}}),Object.assign(s.prototype,{constructor:s,init:function(){var t=this.s,i=this.c;t[0].height=this.h+"px",this.zone.h=this.h,this.isUI&&(t[0].background=this.bg),void 0!==i[1]&&this.autoWidth&&(t[1]=i[1].style,t[1].height=this.h-4+"px",t[1].lineHeight=this.h-8+"px");for(var s=w.frag,e=1,h=i.length;e!==h;e++)void 0!==i[e]&&(s.appendChild(i[e]),t[e]=i[e].style);null!==this.target?this.target.appendChild(i[0]):this.isUI?this.main.inner.appendChild(i[0]):document.body.appendChild(i[0]),i[0].appendChild(s),this.rSize(),this.isUI||(this.c[0].style.pointerEvents="auto",k.add(this))},dom:function(t,i,s,e,h){return w.dom(t,i,s,e,h)},setSvg:function(t,i,s,e){w.setSvg(t,i,s,e)},setCss:function(t,i){w.setCss(t,i)},clamp:function(t,i,s){return w.clamp(t,i,s)},getColorRing:function(){return w.colorRing||w.makeColorRing(),w.clone(w.colorRing)},getJoystick:function(t){return w["joystick_"+t]||w.makeJoystick(t),w.clone(w["joystick_"+t])},getCircular:function(t){return w.circular||w.makeCircular(t),w.clone(w.circular)},getKnob:function(t){return w.knob||w.makeKnob(t),w.clone(w.knob)},cursor:function(t){k.cursor(t)},setInput:function(t,i){k.setInput(t,i,w.colors.input)},update:function(){},reset:function(){},getDom:function(){return this.c[0]},uiout:function(){this.s[0].background=this.bg},uiover:function(){this.s[0].background=this.bgOver},rename:function(t){void 0!==this.c[1]&&(this.c[1].textContent=t)},listen:function(){return k.addListen(this),this},listening:function(){null!==this.objectLink&&(this.isSend||this.isEdit||this.setValue(this.objectLink[this.val]))},setValue:function(t){this.isNumber?this.value=this.numValue(t):this.value=t,this.update()},onChange:function(t){return this.callback=t,this},onFinishChange:function(t){return this.callback=null,this.endCallback=t,this},send:function(t){this.isSend=!0,null!==this.objectLink&&(this.objectLink[this.val]=t||this.value),this.callback&&this.callback(t||this.value),this.isSend=!1},sendEnd:function(t){this.endCallback&&this.endCallback(t||this.value),null!==this.objectLink&&(this.objectLink[this.val]=t||this.value)},clear:function(){w.clear(this.c[0]),null!==this.target?this.target.removeChild(this.c[0]):this.isUI?this.main.clearOne(this):document.body.removeChild(this.c[0]),this.isUI||k.remove(this),this.c=null,this.s=null,this.callback=null,this.target=null},setSize:function(t){if(this.autoWidth)if(this.w=t,this.simple)this.sb=this.w-this.sa;else{var i=this.w*(this.p/100);this.sa=Math.floor(i+10),this.sb=Math.floor(this.w-i-20)}},rSize:function(){this.autoWidth&&(this.s[0].width=this.w+"px",this.simple||(this.s[1].width=this.sa+"px"))},setTypeNumber:function(t){this.isNumber=!0,this.value=0,void 0!==t.value&&("string"==typeof t.value?this.value=1*t.value:this.value=t.value),this.min=void 0===t.min?-1/0:t.min,this.max=void 0===t.max?1/0:t.max,this.precision=void 0===t.precision?2:t.precision;var i;switch(this.precision){case 0:i=1;break;case 1:i=.1;break;case 2:i=.01;break;case 3:i=.001;break;case 4:i=1e-4}this.step=void 0===t.step?i:t.step,this.range=this.max-this.min,this.value=this.numValue(this.value)},numValue:function(t){return 1*Math.min(this.max,Math.max(this.min,t)).toFixed(this.precision)},handleEvent:function(t){return this[t.type](t)},wheel:function(t){return!1},mousedown:function(t){return!1},mousemove:function(t){return!1},mouseup:function(t){return!1},keydown:function(t){return!1},setReferency:function(t,i){this.objectLink=t,this.val=i},display:function(t){t=t||!1,this.s[0].display=t?"block":"none"},open:function(){this.isOpen||(this.isOpen=!0)},close:function(){this.isOpen&&(this.isOpen=!1)},needZone:function(){k.needReZone=!0}}),e.prototype=Object.assign(Object.create(s.prototype),{constructor:e,mousemove:function(t){this.cursor("pointer")},mousedown:function(t){return this.value=!this.value,this.update(),this.send(),!0},update:function(){var t=this.s;this.value?(t[2].background=this.fontColor,t[2].borderColor=this.fontColor,t[3].marginLeft="17px"):(t[2].background=this.colors.boolbg,t[2].borderColor=this.colors.boolbg,t[3].marginLeft="2px")},rSize:function(){s.prototype.rSize.call(this);var t=this.s;t[2].left=this.sa+"px",t[3].left=this.sa+1+"px"}}),h.prototype=Object.assign(Object.create(s.prototype),{constructor:h,testZone:function(t){var i=this.local;if(-1===i.x&&-1===i.y)return"";for(var s=this.lng,e=this.tmp;s--;)if(i.x>e[s][0]&&i.x<e[s][2])return s+2;return""},mouseup:function(t){return!!this.isDown&&(this.value=!1,this.isDown=!1,this.mousemove(t))},mousedown:function(t){var i=this.testZone(t);return!!i&&(this.isDown=!0,this.value=this.values[i-2],this.isLoadButton||this.send(),this.mousemove(t))},mousemove:function(t){var i=!1,s=this.testZone(t);return""!==s?(this.cursor("pointer"),i=this.modes(this.isDown?3:2,s)):i=this.reset(),i},modes:function(t,i){for(var s=!1,e=0;e<this.lng;e++)(e===i-2?this.mode(t,e+2):this.mode(1,e+2))&&(s=!0);return s},mode:function(t,i){var s=!1,e=i-2;if(this.stat[e]!==t){switch(t){case 1:this.stat[e]=1,this.s[e+2].color=this.fontColor,this.s[e+2].background=this.buttonColor;break;case 2:this.stat[e]=2,this.s[e+2].color="#FFF",this.s[e+2].background=this.colors.select;break;case 3:this.stat[e]=3,this.s[e+2].color="#FFF",this.s[e+2].background=this.colors.down}s=!0}return s},reset:function(){return this.cursor(),this.modes(1,2)},dragover:function(t){t.preventDefault(),this.s[4].borderColor=this.colors.select,this.s[4].color=this.colors.select},dragend:function(t){t.preventDefault(),this.s[4].borderColor=this.fontColor,this.s[4].color=this.fontColor},drop:function(t){t.preventDefault(),this.dragend(t),this.fileSelect(t.dataTransfer.files[0])},initDrager:function(){this.c[4]=this.dom("div",this.css.txt+" text-align:center; line-height:"+(this.h-8)+"px; border:1px dashed "+this.fontColor+"; top:2px;  height:"+(this.h-4)+"px; border-radius:"+this.radius+"px; pointer-events:auto;"),this.c[4].textContent="DRAG",this.c[4].addEventListener("dragover",function(t){this.dragover(t)}.bind(this),!1),this.c[4].addEventListener("dragend",function(t){this.dragend(t)}.bind(this),!1),this.c[4].addEventListener("dragleave",function(t){this.dragend(t)}.bind(this),!1),this.c[4].addEventListener("drop",function(t){this.drop(t)}.bind(this),!1)},initLoader:function(){this.c[3]=this.dom("input",this.css.basic+"top:0px; opacity:0; height:"+this.h+"px; pointer-events:auto; cursor:pointer;"),this.c[3].name="loader",this.c[3].type="file",this.c[3].addEventListener("change",function(t){this.fileSelect(t.target.files[0])}.bind(this),!1)},fileSelect:function(t){var i=["png","jpg","mp4","webm","ogg"],s=["sea","z","hex","bvh","BVH"];if(void 0!==t){var e=new FileReader,h=t.name,o=h.substring(h.lastIndexOf(".")+1,h.length);-1!==i.indexOf(o)?e.readAsDataURL(t):-1!==s.indexOf(o)?e.readAsArrayBuffer(t):e.readAsText(t),e.onload=function(t){this.callback&&this.callback(t.target.result,h,o)}.bind(this)}},label:function(t,i){i=i||2,this.c[i].textContent=t},icon:function(t,i,s){s=s||2,this.s[s].padding=(i||0)+"px 0px",this.c[s].innerHTML=t},rSize:function(){s.prototype.rSize.call(this);for(var t=this.s,i=this.sb,e=this.sa,h=this.lng,o=Math.floor((i-3*(h-1))/h);h--;)this.tmp[h]=[Math.floor(e+o*h+3*h),o],this.tmp[h][2]=this.tmp[h][0]+this.tmp[h][1],t[h+2].left=this.tmp[h][0]+"px",t[h+2].width=this.tmp[h][1]+"px";this.isDragButton&&(t[4].left=e+o+3+"px",t[4].width=o+"px"),this.isLoadButton&&(t[3].left=e+"px",t[3].width=o+"px")}}),o.prototype=Object.assign(Object.create(s.prototype),{constructor:o,mode:function(t){if(this.cmode===t)return!1;switch(t){case 0:this.s[2].color=this.fontColor,this.setSvg(this.c[3],"stroke","rgba(0,0,0,0.1)",0),this.setSvg(this.c[3],"stroke",this.fontColor,1);break;case 1:this.s[2].color=this.colorPlus,this.setSvg(this.c[3],"stroke","rgba(0,0,0,0.3)",0),this.setSvg(this.c[3],"stroke",this.colorPlus,1)}return this.cmode=t,!0},reset:function(){this.isDown=!1},mouseup:function(t){return this.isDown=!1,this.sendEnd(),this.mode(0)},mousedown:function(t){return this.isDown=!0,this.old=this.value,this.oldr=null,this.mousemove(t),this.mode(1)},mousemove:function(t){if(this.isDown){var i=this.offset;if(i.x=this.radius-(t.clientX-this.zone.x),i.y=this.radius-(t.clientY-this.zone.y-this.top),this.r=i.angle()-this.pi90,this.r=(this.r%this.twoPi+this.twoPi)%this.twoPi,null!==this.oldr){var s=this.r-this.oldr;this.r=Math.abs(s)>Math.PI?this.oldr:this.r,s>6&&(this.r=0),s<-6&&(this.r=this.twoPi)}var e=1/this.twoPi,h=this.r*e,o=this.range*h+this.min-this.old;(o>=this.step||o<=this.step)&&(o=~~(o/this.step),this.value=this.numValue(this.old+o*this.step),this.update(!0),this.old=this.value,this.oldr=this.r)}},makePath:function(){var t=40,i=this.percent*this.twoPi-.001,s=t+t*Math.sin(i)+24,e=t-t*Math.cos(i)+24;return"M 64,24 A 40,40 0 "+(i>Math.PI?1:0)+" 1 "+s+","+e},update:function(t){this.c[2].textContent=this.value,this.percent=(this.value-this.min)/this.range,this.setSvg(this.c[3],"d",this.makePath(),1),t&&this.send()}}),n.prototype=Object.assign(Object.create(s.prototype),{constructor:n,testZone:function(t,i){var s=this.local;return-1===s.x&&-1===s.y?"":this.up&&this.isOpen?s.y>this.wfixe?"title":"color":s.y<this.baseH+2?"title":this.isOpen?"color":void 0},mouseup:function(t){this.isDown=!1},mousedown:function(t){var i=this.testZone(t.clientX,t.clientY);if("title"===i)return this.isOpen?this.close():this.open(),!0;"color"===i&&(this.isDown=!0,this.mousemove(t))},mousemove:function(t){var i,s,e,h,o,n=this.testZone(t.clientX,t.clientY);"title"===n&&this.cursor("pointer"),"color"===n&&(this.cursor("crosshair"),this.isDown&&(i=this.offset,i.x=t.clientX-(this.zone.x+this.decal.x+this.mid),i.y=t.clientY-(this.zone.y+this.decal.y+this.mid),(s=i.length()*this.ratio)<128&&(s>88?(e=(i.angle()+this.pi90)/6.28,this.setHSL([(e+1)%1,this.hsl[1],this.hsl[2]])):(h=Math.max(0,Math.min(1,.5-i.x*this.square*.5)),o=Math.max(0,Math.min(1,.5-i.y*this.square*.5)),this.setHSL([this.hsl[0],h,o])))))},setHeight:function(){this.h=this.isOpen?this.wfixe+this.baseH+5:this.baseH,this.s[0].height=this.h+"px",this.zone.h=this.h},parentHeight:function(t){null!==this.parentGroup?this.parentGroup.calc(t):this.isUI&&this.main.calc(t)},open:function(){s.prototype.open.call(this),this.setHeight(),this.up&&(this.zone.y-=this.wfixe+5);var t=this.h-this.baseH;this.s[3].visibility="visible",this.parentHeight(t)},close:function(){s.prototype.close.call(this),this.up&&(this.zone.y+=this.wfixe+5);var t=this.h-this.baseH;this.setHeight(),this.s[3].visibility="hidden",this.parentHeight(-t)},update:function(t){var i=w.rgbToHex(w.hslToRgb([this.hsl[0],1,.5]));this.moveMarkers(),this.value=this.bcolor,this.setSvg(this.c[3],"fill",i,2),this.s[2].background=this.bcolor,this.c[2].textContent=w.htmlToHex(this.bcolor),this.invert=w.findDeepInver(this.rgb),this.s[2].color=this.invert?"#fff":"#000",t&&("array"===this.ctype&&this.send(this.rgb),"rgb"===this.ctype&&this.send(w.htmlRgb(this.rgb)),"hex"===this.ctype&&this.send(w.htmlToHex(this.value)),"html"===this.ctype&&this.send())},setColor:function(t){var i=w.unpack(t);return this.bcolor!=t&&i&&(this.bcolor=t,this.rgb=i,this.hsl=w.rgbToHsl(this.rgb),this.update()),this},setHSL:function(t){return this.hsl=t,this.rgb=w.hslToRgb(t),this.bcolor=w.rgbToHex(this.rgb),this.update(!0),this},moveMarkers:function(){var t=this.invert?"#fff":"#000",s=6.28*this.hsl[0],e=new i(108*Math.sin(s),108*-Math.cos(s)).addScalar(128);this.setSvg(this.c[3],"cx",e.x,5),this.setSvg(this.c[3],"cy",e.y,5),e.set(120*(.5-this.hsl[1]),120*(.5-this.hsl[2])).addScalar(128),this.setSvg(this.c[3],"cx",e.x,6),this.setSvg(this.c[3],"cy",e.y,6),this.setSvg(this.c[3],"stroke",t,6)},rSize:function(){s.prototype.rSize.call(this);var t=this.s;t[2].width=this.sb+"px",t[2].left=this.sa+"px",this.decal.x=Math.floor(.5*(this.w-this.wfixe)),this.decal.y="up"===this.side?2:this.baseH+2,this.mid=Math.floor(.5*this.wfixe),this.setSvg(this.c[3],"viewBox","0 0 "+this.wfixe+" "+this.wfixe),t[3].width=this.wfixe+"px",t[3].height=this.wfixe+"px",t[3].left=this.decal.x+"px",t[3].top=this.decal.y+"px",this.ratio=256/this.wfixe,this.square=1/(this.wfixe/256*60),this.setHeight()}}),r.prototype=Object.assign(Object.create(s.prototype),{constructor:r,mousedown:function(t){this.isShow?this.hide():this.show()},mode:function(t){var i=this.s;switch(t){case 0:i[1].color=this.fontColor;break;case 1:i[1].color="#FFF";break;case 2:i[1].color=this.fontColor}},makePath:function(t){var i="";i+="M -1 50";for(var s=0;s<this.res+1;s++)i+=" L "+s+" "+t[s];return i+=" L "+(this.res+1)+" 50"},drawGraph:function(){var t=this.c[2];this.pa1.shift(),this.pa1.push(8.5+this.round(30*(1-this.fps/100))),this.setSvg(t,"d",this.makePath(this.pa1),0),this.pa2.shift(),this.pa2.push(8.5+this.round(30*(1-this.ms/200))),this.setSvg(t,"d",this.makePath(this.pa2),1),this.isMem&&(this.pa3.shift(),this.pa3.push(8.5+this.round(30*(1-this.mm))),this.setSvg(t,"d",this.makePath(this.pa3),2))},show:function(){this.h=this.hplus+this.baseH,this.setSvg(this.c[4],"d","M 5 8 L 8 3 2 3 5 8 Z"),null!==this.parentGroup?this.parentGroup.calc(this.hplus):this.isUI&&this.main.calc(this.hplus),this.s[0].height=this.h+"px",this.s[2].display="block",this.isShow=!0,k.addListen(this)},hide:function(){this.h=this.baseH,this.setSvg(this.c[4],"d","M 3 8 L 8 5 3 2 3 8 Z"),null!==this.parentGroup?this.parentGroup.calc(-this.hplus):this.isUI&&this.main.calc(-this.hplus),this.s[0].height=this.h+"px",this.s[2].display="none",this.isShow=!1,k.removeListen(this),this.c[1].textContent="FPS"},begin:function(){this.startTime=this.now()},end:function(){var t=this.now();if(this.ms=t-this.startTime,this.frames++,t>this.prevTime+1e3&&(this.fps=this.round(1e3*this.frames/(t-this.prevTime)),this.prevTime=t,this.frames=0,this.isMem)){var i=performance.memory.usedJSHeapSize,s=performance.memory.jsHeapSizeLimit;this.mem=this.round(9.54e-7*i),this.mm=i/s}return this.drawGraph(),this.c[1].innerHTML="FPS "+this.fps+'<font color="yellow"> MS '+(0|this.ms)+'</font><font color="cyan"> MB '+this.mem+"</font>",t},listening:function(){this.startTime=this.end()},rSize:function(){this.s[0].width=this.w+"px",this.s[1].width=this.w+"px",this.s[2].left="10px",this.s[2].width=this.w-20+"px"}}),l.prototype=Object.assign(Object.create(s.prototype),{constructor:l,testZone:function(t){var i=this.local;if(-1===i.x&&-1===i.y)return"";var s=this.lng,e=this.tmp;if(i.y>this.top&&i.y<this.h-20)for(;s--;)if(i.x>e[s][0]&&i.x<e[s][2])return s;return""},mode:function(t,i){if(t===this.cMode[i])return!1;var s;switch(t){case 0:s=.3;break;case 1:s=.6;break;case 2:s=1}return this.reset(),this.setSvg(this.c[3],"fill-opacity",s,i+2),this.cMode[i]=t,!0},reset:function(){for(var t=!1,i=this.lng;i--;)0!==this.cMode[i]&&(this.cMode[i]=0,this.setSvg(this.c[3],"fill-opacity",.3,i+2),t=!0);return t},mouseup:function(t){if(this.isDown=!1,-1!==this.current)return this.reset()},mousedown:function(t){return this.isDown=!0,this.mousemove(t)},mousemove:function(t){var i=!1,s=this.testZone(t);return""===s?i=this.reset():(i=this.mode(this.isDown?2:1,s),this.isDown&&(this.v[s]=this.clamp(1-(t.clientY-this.zone.y-this.top-10)/this.gh,0,1),this.update(!0))),i},update:function(t){this.updateSVG(),t&&this.send()},makePath:function(){for(var t,i,s,e,h,o,n="",r=0;r<this.lng;r++)t=this.gh-this.v[r]*this.gh+14,i=14+r*this.iw+4*r,e=i+.5*this.iw,s=i+this.iw,n+=0===r?"M "+i+" "+t+" T "+e+" "+t:" C "+h+" "+o+","+i+" "+t+","+e+" "+t,r===this.lng-1&&(n+=" T "+s+" "+t),h=s,o=t;return n},updateSVG:function(){this.setSvg(this.c[3],"d",this.makePath(),0);for(var t=0;t<this.lng;t++)this.setSvg(this.c[3],"height",this.v[t]*this.gh,t+2),this.setSvg(this.c[3],"y",this.gh-this.v[t]*this.gh+14,t+2),this.value[t]=1*(this.v[t]*this.multiplicator).toFixed(this.precision);this.c[2].textContent=this.value},rSize:function(){s.prototype.rSize.call(this);var t=this.s;void 0!==this.c[1]&&(t[1].width=this.w+"px"),t[2].width=this.w+"px",t[3].width=this.w+"px";for(var i=this.w-28,e=(i-4*(this.lng-1))/this.lng,h=[],o=0;o<this.lng;o++)h[o]=[14+o*e+4*o,e],h[o][2]=h[o][0]+h[o][1];this.tmp=h}}),a.prototype=Object.assign(Object.create(s.prototype),{constructor:a,isGroup:!0,testZone:function(t){var i=this.local;if(-1===i.x&&-1===i.y)return"";var s="";return i.y<this.baseH?s="title":this.isOpen&&(s="content"),s},clearTarget:function(){return-1!==this.current&&(this.target.uiout(),this.target.reset(),this.current=-1,this.target=null,k.cursor(),!0)},reset:function(){this.clearTarget()},handleEvent:function(t){var i=t.type,s=!1,e=!1,h=this.testZone(t);if(h){switch(h){case"content":k.isMobile&&"mousedown"===i&&this.getNext(t,s),this.target&&(e=this.target.handleEvent(t)),k.lock||this.getNext(t,s);break;case"title":"mousedown"===i&&(this.isOpen?this.close():this.open())}return this.isDown&&(s=!0),e&&(s=!0),s}},getNext:function(t,i){var s=k.findTarget(this.uis,t);s!==this.current&&(this.clearTarget(),this.current=s),-1!==s&&(this.target=this.uis[this.current],this.target.uiover())},calcH:function(){var t,i,s=this.uis.length,e=0,h=0,o=0;for(t=0;t<s;t++)i=this.uis[t],i.autoWidth?e+=i.h+1:(0===h?e+=i.h+1:o<i.h&&(e+=i.h-o),o=i.h,(h+=i.w)+i.w>this.w&&(h=0));return e},calcUis:function(){this.isOpen&&k.calcUis(this.uis,this.zone,this.zone.y+this.baseH)},setBG:function(t){this.s[0].background=t;for(var i=this.uis.length;i--;)this.uis[i].setBG(t)},add:function(){var t=arguments;"object"==typeof t[1]?(t[1].isUI=this.isUI,t[1].target=this.c[2],t[1].main=this.main):"string"==typeof arguments[1]&&(void 0===t[2]?[].push.call(t,{isUI:!0,target:this.c[2],main:this.main}):(t[2].isUI=!0,t[2].target=this.c[2],t[2].main=this.main));var i=g.apply(this,t);return this.uis.push(i),i.autoHeight&&(i.parentGroup=this),i},parentHeight:function(t){null!==this.parentGroup?this.parentGroup.calc(t):this.isUI&&this.main.calc(t)},open:function(){s.prototype.open.call(this),this.setSvg(this.c[4],"d",this.svgs.arrowDown),this.rSizeContent();var t=this.h-this.baseH;this.parentHeight(t)},close:function(){s.prototype.close.call(this);var t=this.h-this.baseH;this.setSvg(this.c[4],"d",this.svgs.arrow),this.h=this.baseH,this.s[0].height=this.h+"px",this.parentHeight(-t)},clear:function(){this.clearGroup(),this.isUI&&this.main.calc(-(this.h+1)),s.prototype.clear.call(this)},clearGroup:function(){this.close();for(var t=this.uis.length;t--;)this.uis[t].clear(),this.uis.pop();this.uis=[],this.h=this.baseH},calc:function(t){this.isOpen&&(void 0!==t?(this.h+=t,this.isUI&&this.main.calc(t)):this.h=this.calcH()+this.baseH,this.s[0].height=this.h+"px")},rSizeContent:function(){for(var t=this.uis.length;t--;)this.uis[t].setSize(this.w),this.uis[t].rSize();this.calc()},rSize:function(){s.prototype.rSize.call(this);var t=this.s;t[3].left=this.sa+this.sb-17+"px",t[1].width=this.w+"px",t[2].width=this.w+"px",this.isOpen&&this.rSizeContent()}}),c.prototype=Object.assign(Object.create(s.prototype),{constructor:c,mode:function(t){switch(t){case 0:0===this.model?(this.setSvg(this.c[3],"fill","url(#gradIn)",4),this.setSvg(this.c[3],"stroke","#000",4)):(this.setSvg(this.c[3],"stroke","rgba(100,100,100,0.25)",2),this.setSvg(this.c[3],"stroke","#666",4),this.setSvg(this.c[3],"fill","none",4));break;case 1:0===this.model?(this.setSvg(this.c[3],"fill","url(#gradIn2)",4),this.setSvg(this.c[3],"stroke","rgba(0,0,0,0)",4)):(this.setSvg(this.c[3],"stroke","rgba(48,138,255,0.25)",2),this.setSvg(this.c[3],"stroke",this.colors.select,4),this.setSvg(this.c[3],"fill","rgba(48,138,255,0.25)",4))}},addInterval:function(){null!==this.interval&&this.stopInterval(),this.pos.isZero()||(this.interval=setInterval(function(){this.update()}.bind(this),10))},stopInterval:function(){null!==this.interval&&(clearInterval(this.interval),this.interval=null)},reset:function(){this.addInterval(),this.mode(0)},mouseup:function(t){this.addInterval(),this.isDown=!1},mousedown:function(t){this.isDown=!0,this.mousemove(t),this.mode(2)},mousemove:function(t){if(this.mode(1),this.isDown){this.tmp.x=this.radius-(t.clientX-this.zone.x),this.tmp.y=this.radius-(t.clientY-this.zone.y-this.top);if(this.tmp.length()>this.distance){var i=Math.atan2(this.tmp.x,this.tmp.y);this.tmp.x=Math.sin(i)*this.distance,this.tmp.y=Math.cos(i)*this.distance}this.pos.copy(this.tmp).divideScalar(this.distance).negate(),this.update()}},setValue:function(t){void 0===t&&(t=[0,0]),this.pos.set(t[0]||0,t[1]||0),this.updateSVG()},update:function(t){void 0===t&&(t=!0),null!==this.interval&&(this.isDown||(this.pos.lerp(null,.3),this.pos.x=Math.abs(this.pos.x)<.01?0:this.pos.x,this.pos.y=Math.abs(this.pos.y)<.01?0:this.pos.y,this.isUI&&this.main.isCanvas&&this.main.draw())),this.updateSVG(),t&&this.send(),this.pos.isZero()&&this.stopInterval()},updateSVG:function(){var t=this.radius- -this.pos.x*this.distance,i=this.radius- -this.pos.y*this.distance;if(0===this.model){var s=t+5*this.pos.x+5,e=i+5*this.pos.y+10;this.setSvg(this.c[3],"cx",s*this.ratio,3),this.setSvg(this.c[3],"cy",e*this.ratio,3)}else this.setSvg(this.c[3],"cx",t*this.ratio,3),this.setSvg(this.c[3],"cy",i*this.ratio,3);this.setSvg(this.c[3],"cx",t*this.ratio,4),this.setSvg(this.c[3],"cy",i*this.ratio,4),this.value[0]=1*(this.pos.x*this.multiplicator).toFixed(this.precision),this.value[1]=1*(this.pos.y*this.multiplicator).toFixed(this.precision),this.c[2].textContent=this.value},clear:function(){this.stopInterval(),s.prototype.clear.call(this)}}),u.prototype=Object.assign(Object.create(o.prototype),{constructor:u,mode:function(t){if(this.cmode===t)return!1;switch(t){case 0:this.s[2].color=this.fontColor,this.setSvg(this.c[3],"fill",this.colors.button,0),this.setSvg(this.c[3],"stroke",this.fontColor,1);break;case 1:this.s[2].color=this.colorPlus,this.setSvg(this.c[3],"fill",this.colors.select,0),this.setSvg(this.c[3],"stroke",this.colorPlus,1)}return this.cmode=t,!0},mousemove:function(t){if(this.isDown){var i=this.offset;i.x=this.radius-(t.clientX-this.zone.x),i.y=this.radius-(t.clientY-this.zone.y-this.top),this.r=-Math.atan2(i.x,i.y),null!==this.oldr&&(this.r=Math.abs(this.r-this.oldr)>Math.PI?this.oldr:this.r),this.r=this.r>this.mPI?this.mPI:this.r,this.r=this.r<-this.mPI?-this.mPI:this.r;var s=1/this.cirRange,e=(this.r+this.mPI)*s,h=this.range*e+this.min-this.old;(h>=this.step||h<=this.step)&&(h=Math.floor(h/this.step),this.value=this.numValue(this.old+h*this.step),this.update(!0),this.old=this.value,this.oldr=this.r)}},makeGrad:function(){var t,i,s,e,h,o,n,r="",l=64,a=Math.PI+this.mPI,c=Math.PI-this.mPI;this.step>5?(i=this.range/this.step,t=(a-c)/i):(t=(a-c)/l*2,i=32);for(var u=0;u<=i;++u)s=a-t*u,e=l+44*Math.sin(s),h=l+44*Math.cos(s),o=l+40*Math.sin(s),n=l+40*Math.cos(s),r+="M"+e+" "+h+" L"+o+" "+n+" ";return r},update:function(t){this.c[2].textContent=this.value,this.percent=(this.value-this.min)/this.range;var i=this.percent*this.cirRange-this.mPI,s=Math.sin(i),e=Math.cos(i),h=25*s+64,o=-25*e+64,n=20*s+64,r=-20*e+64;this.setSvg(this.c[3],"d","M "+h+" "+o+" L "+n+" "+r,1),t&&this.send()}}),d.prototype=Object.assign(Object.create(s.prototype),{constructor:d,testZone:function(t){var i=this.local;if(-1===i.x&&-1===i.y)return"";if(this.up&&this.isOpen){if(i.y>this.h-this.baseH)return"title";if(this.scroll&&i.x>this.sa+this.sb-20)return"scroll";if(i.x>this.sa)return this.testItems(i.y-this.baseH)}else{if(i.y<this.baseH+2)return"title";if(this.isOpen){if(this.scroll&&i.x>this.sa+this.sb-20)return"scroll";if(i.x>this.sa)return this.testItems(i.y-this.baseH)}}return""},testItems:function(t){for(var i,s,e,h="",o=this.items.length;o--;)if(i=this.items[o],s=i.posy+this.topList,e=i.posy+this.itemHeight+1+this.topList,t>=s&&t<=e)return h="item"+o,this.unSelected(),this.current=i,this.selected(),h;return h},unSelected:function(){this.current&&(this.current.style.background="rgba(0,0,0,0.2)",this.current.style.color=this.fontColor,this.current=null)},selected:function(){this.current.style.background=this.colors.select,this.current.style.color="#FFF"},mouseup:function(t){this.isDown=!1},mousedown:function(t){var i=this.testZone(t);return!!i&&("scroll"===i?(this.isDown=!0,this.mousemove(t)):"title"===i?(this.modeTitle(2),this.isOpen?this.close():this.open()):this.current&&(this.value=this.current.textContent,this.c[3].textContent=this.value,this.send(),this.close()),!0)},mousemove:function(t){var i=!1,s=this.testZone(t);if(!s)return i;if("title"===s)this.unSelected(),this.modeTitle(1),this.cursor("pointer");else if("scroll"===s){if(this.cursor("s-resize"),this.modeScroll(1),this.isDown){this.modeScroll(2);var e=this.zone.y+this.baseH-2;this.update(t.clientY-e-.5*this.sh)}}else this.modeTitle(0),this.modeScroll(0),this.cursor("pointer");return s!==this.prevName&&(i=!0),this.prevName=s,i},wheel:function(t){return"title"!==this.testZone(t)&&(this.py+=10*t.delta,this.update(this.py),!0)},reset:function(){this.prevName="",this.unSelected(),this.modeTitle(0),this.modeScroll(0)},modeScroll:function(t){if(t!==this.sMode){switch(t){case 0:this.scroller.style.background=this.buttonColor;break;case 1:this.scroller.style.background=this.colors.select;break;case 2:this.scroller.style.background=this.colors.down}this.sMode=t}},modeTitle:function(t){if(t!==this.tMode){var i=this.s;switch(t){case 0:i[3].color=this.fontColor,i[3].background=this.buttonColor;break;case 1:i[3].color="#FFF",i[3].background=this.colors.select;break;case 2:i[3].color=this.fontColor,i[3].background=this.colors.down}this.tMode=t}},clearList:function(){for(;this.listIn.children.length;)this.listIn.removeChild(this.listIn.lastChild);this.items=[]},setList:function(t,i){this.clearList(),this.list=t,this.length=this.list.length,this.maxItem=this.full?this.length:5,this.maxItem=this.length<this.maxItem?this.length:this.maxItem,this.maxHeight=this.maxItem*(this.itemHeight+1)+2,this.max=this.length*(this.itemHeight+1)+2,this.ratio=this.maxHeight/this.max,this.sh=this.maxHeight*this.ratio,this.range=this.maxHeight-this.sh,this.c[2].style.height=this.maxHeight+"px",this.scroller.style.height=this.sh+"px",this.max>this.maxHeight&&(this.ww=this.sb-20,this.scroll=!0);for(var s,e,h=0;h<this.length;h++)e=this.list[h],s=this.dom("div",this.css.item+"width:"+this.ww+"px; height:"+this.itemHeight+"px; line-height:"+(this.itemHeight-5)+"px; color:"+this.fontColor+";"),s.textContent=e,s.name="item"+h,s.posy=(this.itemHeight+1)*h,this.listIn.appendChild(s),this.items.push(s);void 0!==i?isNaN(i)?this.value=i:this.value=this.list[i]:this.value=this.list[0],this.c[3].textContent=this.value},update:function(t){this.scroll&&(t=t<0?0:t,t=t>this.range?this.range:t,this.topList=-Math.floor(t/this.ratio),this.listIn.style.top=this.topList+"px",this.scroller.style.top=Math.floor(t)+"px",this.py=t)},parentHeight:function(t){null!==this.parentGroup?this.parentGroup.calc(t):this.isUI&&this.main.calc(t)},open:function(){s.prototype.open.call(this),this.update(0),this.h=this.maxHeight+this.baseH+5,this.scroll?this.scroller.style.display="block":(this.topList=0,this.h=this.baseH+5+this.max,this.scroller.style.display="none"),this.s[0].height=this.h+"px",this.s[2].display="block",this.up?(this.zone.y-=this.h-(this.baseH-10),this.setSvg(this.c[4],"d",this.svgs.arrowUp)):this.setSvg(this.c[4],"d",this.svgs.arrowDown),this.rSizeContent();var t=this.h-this.baseH;this.zone.h=this.h,this.parentHeight(t)},close:function(){s.prototype.close.call(this),this.up&&(this.zone.y+=this.h-(this.baseH-10));var t=this.h-this.baseH;this.h=this.baseH,this.s[0].height=this.h+"px",this.s[2].display="none",this.setSvg(this.c[4],"d",this.svgs.arrow),this.zone.h=this.h,this.parentHeight(-t)},text:function(t){this.c[3].textContent=t},rSizeContent:function(){for(var t=this.length;t--;)this.listIn.children[t].style.width=this.ww+"px"},rSize:function(){s.prototype.rSize.call(this);var t=this.s,i=this.sb,e=this.sa;t[2].width=i+"px",t[2].left=e+"px",t[3].width=i+"px",t[3].left=e+"px",t[4].left=e+i-17+"px",this.ww=i,this.max>this.maxHeight&&(this.ww=i-20),this.isOpen&&this.rSizeContent()}}),
p.prototype=Object.assign(Object.create(s.prototype),{constructor:p,testZone:function(t){var i=this.local;if(-1===i.x&&-1===i.y)return"";for(var s=this.lng,e=this.tmp;s--;)if(i.x>e[s][0]&&i.x<e[s][2])return s;return""},mode:function(t,i){if(t===this.cMode[i])return!1;var s;switch(t){case 0:s=this.colors.border;break;case 1:s=this.colors.borderOver;break;case 2:s=this.colors.borderSelect}return this.reset(),this.c[i+2].style.borderColor=s,this.cMode[i]=t,!0},mousedown:function(t){var i=this.testZone(t);return""!==i&&(this.current=i,this.isDown=!0,this.prev={x:t.clientX,y:t.clientY,d:0,v:this.isNumber?parseFloat(this.value):parseFloat(this.value[this.current])},this.mode(2,i))},mouseup:function(t){var i=this.testZone(t);if(this.isDown=!1,-1!==this.current){var s=this.prev.d;return this.current=-1,this.prev={x:0,y:0,d:0,v:0},s?this.reset():(this.setInput(this.c[i+2],function(){this.testValue()}.bind(this)),!0)}},mousemove:function(t){var i=!1,s=this.testZone(t);if(""===s?(i=this.reset(),this.cursor()):(i=this.mode(1,s),this.cursor(-1!==this.current?"move":"pointer")),-1!==this.current){this.prev.d+=t.clientX-this.prev.x-(t.clientY-this.prev.y);var e=this.prev.v+this.prev.d*this.step;this.value[this.current]=this.numValue(e),this.c[2+this.current].textContent=this.value[this.current],this.validate(),this.prev.x=t.clientX,this.prev.y=t.clientY,i=!0}return i},keydown:function(t){return!0},reset:function(){var t=!1;this.isDown=!1;for(var i=this.lng;i--;)0!==this.cMode[i]&&(this.cMode[i]=0,this.c[2+i].style.borderColor=this.colors.border,t=!0);return t},setValue:function(t,i){i=i||0,this.value[i]=this.numValue(t),this.c[2+i].textContent=this.value[i]},testValue:function(){for(var t=this.lng;t--;)if(isNaN(this.c[2+t].textContent))this.c[2+t].textContent=this.value[t];else{var i=this.numValue(this.c[2+t].textContent);this.c[2+t].textContent=i,this.value[t]=i}this.validate()},validate:function(){for(var t=[],i=this.lng;i--;)t[i]=this.value[i]*this.toRad;this.isNumber?this.send(t[0]):this.send(t)},rSize:function(){s.prototype.rSize.call(this);for(var t=Math.floor((this.sb+5)/this.lng)-5,i=this.s,e=this.lng;e--;)this.tmp[e]=[Math.floor(this.sa+t*e+5*e),t],this.tmp[e][2]=this.tmp[e][0]+this.tmp[e][1],i[2+e].left=this.tmp[e][0]+"px",i[2+e].width=this.tmp[e][1]+"px"}}),f.prototype=Object.assign(Object.create(s.prototype),{constructor:f,testZone:function(t){var i=this.local;return-1===i.x&&-1===i.y?"":i.x>=this.txl?"text":i.x>=this.sa?"scroll":""},mouseup:function(t){this.isDown&&(this.isDown=!1)},mousedown:function(t){var i=this.testZone(t);return!!i&&("scroll"===i&&(this.isDown=!0,this.old=this.value,this.mousemove(t)),"text"===i&&this.setInput(this.c[2],function(){this.validate()}.bind(this)),!0)},mousemove:function(t){var i=!1,s=this.testZone(t);if("scroll"===s?(this.mode(1),this.cursor("w-resize")):"text"===s?this.cursor("pointer"):this.cursor(),this.isDown){var e=(t.clientX-(this.zone.x+this.sa)-3)/this.ww*this.range+this.min-this.old;(e>=this.step||e<=this.step)&&(e=Math.floor(e/this.step),this.value=this.numValue(this.old+e*this.step),this.update(!0),this.old=this.value),i=!0}return i},keydown:function(t){return!0},validate:function(){var t=this.c[2].textContent;isNaN(t)?this.c[2].textContent=this.value:(this.value=this.numValue(t),this.update(!0))},reset:function(){this.isDown=!1,this.mode(0)},mode:function(t){var i=this.s;switch(t){case 0:i[2].color=this.fontColor,i[4].background=this.colors.scrollback,i[5].background=this.fontColor;break;case 1:i[2].color=this.colorPlus,i[4].background=this.colors.scrollbackover,i[5].background=this.colorPlus}},update:function(t){var i=Math.floor(this.ww*((this.value-this.min)/this.range));3!==this.model&&(this.s[5].width=i+"px"),this.s[6]&&(this.s[6].left=this.sa+i+3+"px"),this.c[2].textContent=this.value,t&&this.send()},rSize:function(){s.prototype.rSize.call(this);var t=this.sb-this.sc;this.ww=t-6;var i=this.sc;!this.isUI&&this.simple||(i=this.sc+10),this.txl=this.w-i+2;var e=Math.floor(.5*this.h)-8,h=this.s;h[2].width=this.sc-2+"px",h[2].left=this.txl+"px",h[2].top=e+"px",h[3].left=this.sa+"px",h[3].width=t+"px",h[4].left=this.sa+"px",h[4].width=t+"px",h[5].left=this.sa+3+"px",this.update()}}),v.prototype=Object.assign(Object.create(s.prototype),{constructor:v,mousedown:function(t){return this.setInput(this.c[2],function(){this.validate()}.bind(this)),this.mode(2)},mousemove:function(t){return this.mode(1)},keydown:function(t){return!0},mode:function(t){if(t===this.cmode)return!1;var i;switch(t){case 0:i=this.colors.border;break;case 1:i=this.colors.borderOver;break;case 2:i=this.colors.borderSelect}return this.c[2].style.borderColor=i,this.cmode=t,!0},reset:function(){this.mode(0)},rSize:function(){s.prototype.rSize.call(this);var t=this.s;t[2].color=this.fontColor,t[2].left=this.sa+"px",t[2].width=this.sb+"px",t[2].height=this.h-4+"px",t[2].lineHeight=this.h-8+"px"},validate:function(){this.value=this.c[2].textContent,this.send()}}),m.prototype=Object.assign(Object.create(s.prototype),{constructor:m,text:function(t){this.c[1].textContent=t},text2:function(t){this.c[2].textContent=t},rSize:function(){s.prototype.rSize.call(this),this.s[1].width=this.w-50+"px",this.s[2].left=this.w-76+"px"}}),Object.assign(x.prototype,{constructor:x,isGui:!0,dispose:function(){this.clear(),null!==this.parent&&this.parent.removeChild(this.content),k.remove(this)},onDraw:function(){},makeCanvas:function(){this.canvas=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),this.canvas.width=this.zone.w,this.canvas.height=this.forceHeight?this.forceHeight:this.zone.h},draw:function(t){if(null!==this.canvas){var i=this.zone.w,s=this.forceHeight?this.forceHeight:this.zone.h;k.toCanvas(this,i,s,t)}},getDom:function(){return this.content},setMouse:function(t){this.mouse.set(t.x,t.y)},setText:function(t,i,s){w.setText(t,i,s)},hide:function(t){this.content.style.display=t?"none":"block"},onChange:function(t){return this.callback=t,this},mode:function(t){var i=!1;if(t!==this.cn){switch(this.cn=t,t){case"def":this.scroll.style.background=this.colors.scroll,this.bottom.style.background=this.colors.background,this.bottom.style.color=this.colors.text;break;case"scrollOver":this.scroll.style.background=this.colors.select;break;case"scrollDown":this.scroll.style.background=this.colors.down;break;case"bottomOver":this.bottom.style.background=this.colors.backgroundOver,this.bottom.style.color="#FFF"}i=!0}return i},clearTarget:function(){return-1!==this.current&&(this.target.uiout(),this.target.reset(),this.target=null,this.current=-1,k.cursor(),!0)},testZone:function(t){var i=this.local;if(-1===i.x&&-1===i.y)return"";this.isReset=!1;var s=this.isScroll?this.zone.w-this.size.s:this.zone.w;return i.y>this.zone.h-this.bh&&i.y<this.zone.h?"bottom":i.x>s?"scroll":"content"},handleEvent:function(t){var i=t.type,s=!1,e=!1,h=this.testZone(t);if("mouseup"===i&&this.isDown&&(this.isDown=!1),"mousedown"!==i||this.isDown||(this.isDown=!0),h){switch(h){case"content":t.clientY=this.isScroll?t.clientY+this.decal:t.clientY,k.isMobile&&"mousedown"===i&&this.getNext(t,s),this.target&&(e=this.target.handleEvent(t)),"mousemove"===i&&(s=this.mode("def")),"wheel"===i&&!e&&this.isScroll&&(s=this.onWheel(t)),k.lock||this.getNext(t,s);break;case"bottom":this.clearTarget(),"mousemove"===i&&(s=this.mode("bottomOver")),"mousedown"===i&&(this.isOpen=!this.isOpen,this.bottom.textContent=this.isOpen?"close":"open",this.setHeight(),this.mode("def"),s=!0);break;case"scroll":this.clearTarget(),"mousemove"===i&&(s=this.mode("scrollOver")),"mousedown"===i&&(s=this.mode("scrollDown")),"wheel"===i&&(s=this.onWheel(t)),this.isDown&&this.update(t.clientY-this.zone.y-.5*this.sh)}this.isDown&&(s=!0),e&&(s=!0),s&&this.draw()}},getNext:function(t,i){var s=k.findTarget(this.uis,t);s!==this.current&&(this.clearTarget(),this.current=s),-1!==s&&(this.target=this.uis[this.current],this.target.uiover())},onWheel:function(t){return this.oy+=20*t.delta,this.update(this.oy),!0},reset:function(t){if(!this.isReset){this.mouse.neg(),this.isDown=!1,k.clearInput();var i=this.mode("def"),s=this.clearTarget();(i||s)&&this.draw(!0),this.isReset=!0}},add:function(){var t=arguments;"object"==typeof t[1]?(t[1].isUI=!0,t[1].main=this):"string"==typeof t[1]&&(void 0===t[2]?[].push.call(t,{isUI:!0,main:this}):(t[2].isUI=!0,t[2].main=this));var i=g.apply(this,t);if(null!==i){if(this.uis.push(i),i.autoWidth)this.prevY=0,this.calc(i.h+1);else{var s=i.c[0].getBoundingClientRect().top;this.prevY!==s&&(this.calc(i.h+1),this.prevY=s)}return i}},applyCalc:function(){this.calc(this.tmpH),this.tmpAdd=null},calcUis:function(){k.calcUis(this.uis,this.zone,this.zone.y)},remove:function(t){var i=this.uis.indexOf(t);-1!==i&&this.uis[i].clear()},clearOne:function(t){var i=this.uis.indexOf(t);-1!==i&&(this.inner.removeChild(this.uis[i].c[0]),this.uis.splice(i,1))},clear:function(){for(var t=this.uis.length;t--;)this.uis[t].clear();this.uis=[],k.listens=[],this.calc(-this.h)},upScroll:function(t){this.sw=t?this.size.s:0,this.oy=t?this.oy:0,this.scrollBG.style.display=t?"block":"none",t&&(this.total=this.h,this.maxView=this.maxHeight,this.ratio=this.maxView/this.total,this.sh=this.maxView*this.ratio,this.range=this.maxView-this.sh,this.oy=w.clamp(this.oy,0,this.range),this.scrollBG.style.height=this.maxView+"px",this.scroll.style.height=this.sh+"px"),this.setItemWidth(this.zone.w-this.sw),this.update(this.oy)},update:function(t){t=w.clamp(t,0,this.range),this.decal=Math.floor(t/this.ratio),this.inner.style.top=-this.decal+"px",this.scroll.style.top=Math.floor(t)+"px",this.oy=t},calc:function(t){this.h+=t,clearTimeout(this.tmp),this.tmp=setTimeout(this.setHeight.bind(this),10)},setHeight:function(){if(this.tmp&&clearTimeout(this.tmp),this.zone.h=this.bh,this.isScroll=!1,this.isOpen){var t=this.forceHeight?this.forceHeight:window.innerHeight;this.maxHeight=t-this.zone.y-this.bh;this.h-this.maxHeight>1?(this.isScroll=!0,this.zone.h=this.maxHeight+this.bh):this.zone.h=this.h+this.bh}this.upScroll(this.isScroll),this.innerContent.style.height=this.zone.h-this.bh+"px",this.content.style.height=this.zone.h+"px",this.bottom.style.top=this.zone.h-this.bh+"px",this.isOpen&&this.calcUis(),this.isCanvas&&this.draw(!0)},setWidth:function(t){t&&(this.zone.w=t),this.content.style.width=this.zone.w+"px",this.isCenter&&(this.content.style.marginLeft=-Math.floor(.5*this.zone.w)+"px"),this.setItemWidth(this.zone.w-this.sw),this.setHeight(),this.isCanvasOnly||(k.needReZone=!0)},setItemWidth:function(t){for(var i=this.uis.length;i--;)this.uis[i].setSize(t),this.uis[i].rSize()}});t.REVISION="2.0",t.Tools=w,t.Gui=x,t.Proto=s,t.add=g,t.Bool=e,t.Button=h,t.Circular=o,t.Color=n,t.Fps=r,t.Group=a,t.Joystick=c,t.Knob=u,t.List=d,t.Numeric=p,t.Slide=f,t.TextInput=v,t.Title=m,Object.defineProperty(t,"__esModule",{value:!0})});
